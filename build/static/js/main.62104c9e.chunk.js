(this["webpackJsonpsocial-meadi-app"]=this["webpackJsonpsocial-meadi-app"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(30),r=n.n(a),i=n(8),o=n(4),l=n(5),d=n(7),u=n(6),h=n(2),j=n(9),p=n(10),m="UPDATE_POSTS",b="LOGIN_START",f="LOGIN_SUCCESS",O="LOGIN_FAILED",g="AUTHENTICATE_USER",v="LOG_OUT",x="SIGNUP_START",C="SIGNUP_SUCCESS",N="SIGNUP_FAILED",w="CLEAR_AUTH_STATE",S="EDIT_USER_SUCCESSFUL",y="EDIT_USER_FAILED",k="USER_PROFILE_SUCCESS",_="USER_PROFILE_FAILURE",E="FETCH_USER_PROFILE",I="FETCH_FRIENDS_SUCCESS",A="ADD_FRIEND",T="REMOVE_FRIEND",L="ADD_POST",P="ADD_COMMENT",D="UPDATE_POST_LIKE",R="ADD_COMMENT_LIKES",U="FETCH_SEARCH_RESULTS_SUCCESS",F="http://codeial.codingninjas.com:8000/api/v2",M=function(){return"".concat(F,"/users/login")},B=function(){return"".concat(F,"/users/signup")},G=function(){return"".concat(F,"/users/edit")},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return"".concat(F,"/posts?page=").concat(e,"&limit=").concat(t)},K=function(e){return"".concat(F,"/users/").concat(e)},z=function(){return"".concat(F,"/friendship/fetch_user_friends")},q=function(e){return"".concat(F,"/friendship/create_friendship?user_id=").concat(e)},J=function(e){return"".concat(F,"/friendship/remove_friendship?user_id=").concat(e)},W=function(){return"".concat(F,"/posts/create")},X=function(){return"".concat(F,"/comments/")},V=function(e,t){return"".concat(F,"/likes/toggle?likeable_id=").concat(e,"&likeable_type=").concat(t)},Q=function(e){return"".concat(F,"/users/search?text=").concat(e)};function Z(e){var t=[];for(var n in e){var s=encodeURIComponent(n),c=encodeURIComponent(e[n]);t.push(s+"="+c)}return t.join("&")}function Y(){return localStorage.getItem("token")}function $(){return function(e){var t=H();fetch(t).then((function(e){return e.json()})).then((function(t){var n;console.log(t),e((n=t.data.posts,{type:m,posts:n}))}))}}function ee(e){return function(t){var n=W();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())},body:Z({content:e})}).then((function(e){return e.json()})).then((function(e){var n;console.log("ADD_POST_DATA",e),e.success&&t((n=e.data.post,{type:L,post:n}))}))}}function te(e,t){return function(n){var s=X();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())},body:Z({content:e,post_id:t})}).then((function(e){return e.json()})).then((function(e){e.success&&n(function(e,t){return{type:P,comment:e,postId:t}}(e.data.comment,t))}))}}function ne(e,t,n){return function(s){var c=V(e,t);fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())}}).then((function(e){return e.json()})).then((function(c){console.log("LIKE DATA",c),c.success&&("Post"===t?(s(function(e,t){return{type:D,postId:e,userId:t}}(e,n)),console.log("POST LIKE CLICKED",t)):"Comment"===t&&(s(function(e,t){return{type:R,commentId:e,userId:t}}(e,n)),console.log("COMMENT LIKE CLICKED",t)))}))}}var se=n(0),ce=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.posts;return Object(se.jsxs)("div",{className:"posts-list",children:[Object(se.jsx)(Te,{}),e.map((function(e){return Object(se.jsx)(Pe,{post:e},e._id)}))]})}}]),n}(s.Component);function ae(e,t){return function(n){var s=M();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Z({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(console.log("data",e),e.success)return localStorage.setItem("token",e.data.token),void n((t=e.data.user,{type:f,user:t}));var t,s;n((s=e.message,{type:O,error:s}))}))}}function re(){return{type:v}}function ie(e,t,n,s){return function(c){var a=B();fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Z({email:e,password:t,confirm_password:n,name:s})}).then((function(e){return e.json()})).then((function(e){if(e.success)return localStorage.setItem("token",e.data.token),void c((t=e.data.user,{type:C,user:t}));var t,n;c((n=e.message,{type:N,error:n}))}))}}function oe(){return{type:w}}function le(e,t,n,s){return function(c){var a=G();fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())},body:Z({name:e,password:t,confirm_password:n,id:s})}).then((function(e){return e.json()})).then((function(e){if(console.log("'EDIT PROFIle data",e),e.success)return c((t=e.data.user,{type:S,user:t})),void(e.data.token&&localStorage.setItem("token",e.data.token));var t,n;c((n=e.message,{type:S,error:n}))}))}}function de(e){return function(t){var n=Q(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())}}).then((function(e){return e.json()})).then((function(e){console.log("SEARCH data",e),e.success?t(ue(e.data.users)):t(ue([]))}))}}function ue(e){return{type:U,users:e}}var he=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).logOut=function(){localStorage.removeItem("token"),e.props.dispatch(re())},e.handleSearch=function(t){var n=t.target.value;e.props.dispatch(de(n))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.results;return Object(se.jsx)("div",{children:Object(se.jsxs)("nav",{className:"nav",children:[Object(se.jsx)("div",{className:"left-div",children:t.isLoggedin&&Object(se.jsx)(p.b,{to:"/",children:Object(se.jsx)("img",{src:"https://www.newfoundlandpower.com/-/media/Unsorted/126-RATE-STABILZATION-PLAN--HERO-IMAGE/023SOCIALMEDIAHEROIMAGE.jpg?mw=768&hash=0A5CC41FD0DA7D24379CD810409A3224B3A8EBF8",alt:"logo",id:"logo"})})}),Object(se.jsxs)("div",{className:"search-container",children:[Object(se.jsx)("img",{className:"search-icon",src:"https://image.flaticon.com/icons/svg/483/483356.svg",alt:"search-icon"}),Object(se.jsx)("input",{placeholder:"Search",onChange:this.handleSearch}),n.length>0&&Object(se.jsx)("div",{className:"search-results",children:Object(se.jsx)("ul",{children:n.map((function(e){return Object(se.jsx)("li",{className:"search-results-row",children:Object(se.jsxs)(p.b,{to:"/user/".concat(e._id),children:[Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"}),Object(se.jsx)("span",{children:e.name})]})},e._id)}))})})]}),Object(se.jsxs)("div",{className:"right-nav",children:[t.isLoggedin&&Object(se.jsxs)("div",{className:"user",children:[Object(se.jsx)(p.b,{to:"/settings",children:Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp",id:"user-dp"})}),Object(se.jsx)("span",{children:t.user.name})]}),Object(se.jsx)("div",{className:"nav-links",children:Object(se.jsxs)("ul",{children:[!t.isLoggedin&&Object(se.jsx)("li",{children:Object(se.jsx)(p.b,{to:"/login",children:Object(se.jsx)("img",{src:"https://www.seekpng.com/png/full/367-3670610_png-hd-login-green-login-button-png.png",alt:"Log in",id:"logout-icon"})})}),t.isLoggedin&&Object(se.jsx)("li",{onClick:this.logOut,children:Object(se.jsx)("img",{src:"https://cdn.imgbin.com/15/17/24/imgbin-shutdown-computer-icons-others-Dx5czGQRB8cTKKpXvDyHct6nK.jpg",alt:"Log out",id:"logout-icon"})}),!t.isLoggedin&&Object(se.jsx)("li",{children:Object(se.jsx)(p.b,{to:"/signup",children:Object(se.jsx)("img",{src:"https://www.mywebkc.com/wp-content/uploads/2014/12/Sign-up-Button.png",alt:"signup",id:"logout-icon"})})})]})})]})]})})}}]),n}(c.a.Component);var je=Object(i.b)((function(e){return{auth:e.auth,results:e.search.results}}))(he),pe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.posts,n=e.friends,s=e.isLoggedin;return Object(se.jsxs)("div",{className:"home",children:[Object(se.jsx)(ce,{posts:t}),s&&Object(se.jsx)(Ee,{friends:n}),s&&Object(se.jsx)(He,{})]})}}]),n}(s.Component);var me=function(e){return Object(se.jsx)("div",{children:Object(se.jsx)("h1",{children:"404: Nothing found here!"})})},be=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleEmailChange=function(e){s.setState({email:e.target.value})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleFormSubmit=function(e){e.preventDefault(),console.log("this.state",s.state);var t=s.state,n=t.email,c=t.password;n&&c&&s.props.dispatch(ae(n,c))},s.state={email:"",password:""},s}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(oe())}},{key:"render",value:function(){var e=this.props.auth,t=e.error,n=e.inProgress,s=e.isLoggedin,c=(this.props.location.state||{from:{pathname:"/"}}).from;return s?Object(se.jsx)(j.a,{to:c}):Object(se.jsxs)("form",{className:"login-form",children:[Object(se.jsx)("span",{className:"login-signup-header",children:"Log In"}),t&&Object(se.jsx)("div",{className:"alert error-dailog",children:t}),Object(se.jsx)("div",{className:"field",children:Object(se.jsx)("input",{type:"email",placeholder:"Email",required:!0,onChange:this.handleEmailChange,value:this.state.email})}),Object(se.jsx)("div",{className:"field",children:Object(se.jsx)("input",{type:"password",placeholder:"Password",required:!0,onChange:this.handlePasswordChange,value:this.state.password})}),Object(se.jsx)("div",{className:"field",children:n?Object(se.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Logging in..."}):Object(se.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Log In"})})]})}}]),n}(s.Component);var fe=Object(i.b)((function(e){return{auth:e.auth}}))(be),Oe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleInputChange=function(e,t){s.setState({[e]:t})},s.onFormSubmit=function(e){e.preventDefault();var t=s.state,n=t.email,c=t.password,a=t.confirmPassword,r=t.name;n&&c&&a&&r&&(s.props.dispatch({type:x}),s.props.dispatch(ie(n,c,a,r)))},s.state={email:"",password:"",name:"",confirmPassword:""},s}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(oe())}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t.inProgress,s=t.error;return t.isLoggedin?Object(se.jsx)(j.a,{to:"/"}):Object(se.jsxs)("form",{className:"login-form",children:[Object(se.jsx)("span",{className:"login-signup-header",children:" Signup"}),s&&Object(se.jsx)("div",{className:"alert error-dailog",children:s}),Object(se.jsx)("div",{className:"field",children:Object(se.jsx)("input",{placeholder:"Name",type:"text",required:!0,onChange:function(t){return e.handleInputChange("name",t.target.value)}})}),Object(se.jsx)("div",{className:"field",children:Object(se.jsx)("input",{placeholder:"Email",type:"email",required:!0,onChange:function(t){return e.handleInputChange("email",t.target.value)}})}),Object(se.jsx)("div",{className:"field",children:Object(se.jsx)("input",{placeholder:"Confirm password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("confirmPassword",t.target.value)}})}),Object(se.jsx)("div",{className:"field",children:Object(se.jsx)("input",{placeholder:"Password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("password",t.target.value)}})}),Object(se.jsx)("div",{className:"field",children:Object(se.jsx)("button",{onClick:this.onFormSubmit,disabled:n,children:"Signup"})})]})}}]),n}(s.Component),ge=Object(i.b)((function(e){return{auth:e.auth}}))(Oe),ve=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleChange=function(e,t){s.setState({[e]:t})},s.handleSave=function(){var e=s.state,t=e.password,n=e.confirmPassword,c=e.name,a=s.props.auth.user;s.props.dispatch(le(c,t,n,a._id))},s.state={name:"",password:"",confirmPassword:"",editMode:!1},s}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(oe())}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t.user,s=t.error,c=this.state.editMode;return Object(se.jsxs)("div",{className:"settings",children:[Object(se.jsx)("div",{className:"img-container",children:Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})}),s&&Object(se.jsx)("div",{className:"alert error-dailog",children:s}),!1===s&&Object(se.jsx)("div",{className:"alert success-dailog",children:"Successfully updated profile!"}),Object(se.jsxs)("div",{className:"field",children:[Object(se.jsx)("div",{className:"field-label",children:"Email"}),Object(se.jsx)("div",{className:"field-value",children:n.email})]}),Object(se.jsxs)("div",{className:"field",children:[Object(se.jsx)("div",{className:"field-label",children:"name"}),c?Object(se.jsx)("input",{type:"text",onChange:function(t){return e.handleChange("name",t.target.value)},value:this.state.name}):Object(se.jsx)("div",{className:"field-value",children:n.name})]}),c&&Object(se.jsxs)("div",{className:"field",children:[Object(se.jsx)("div",{className:"field-label",children:"New password"}),Object(se.jsx)("input",{type:"password",onChange:function(t){return e.handleChange("password",t.target.value)},value:this.state.password})]}),c&&Object(se.jsxs)("div",{className:"field",children:[Object(se.jsx)("div",{className:"field-label",children:"Confirm password"}),Object(se.jsx)("input",{type:"password",onChange:function(t){return e.handleChange("confirmPassword",t.target.value)},value:this.state.confirmPassword})]}),Object(se.jsxs)("div",{className:"btn-grp",children:[c?Object(se.jsx)("button",{className:"button save-btn",onClick:this.handleSave,children:"Save"}):Object(se.jsxs)("button",{className:"button edit-btn",onClick:function(t){return e.handleChange("editMode",!0)},children:[" ","Edit profile"]}),c&&Object(se.jsx)("div",{className:"go-back",onClick:function(){return e.handleChange("editMode",!1)},children:"Go back"})]})]})}}]),n}(s.Component);var xe=Object(i.b)((function(e){return{auth:e.auth}}))(ve),Ce=n(27),Ne=n.n(Ce),we=n(42);function Se(e){return function(t){t({type:E});var n=K(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())}}).then((function(e){return e.json()})).then((function(e){var n;t((n=e.data.user,{type:k,user:n}))}))}}function ye(e){return function(t){var n=z(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())}}).then((function(e){return e.json()})).then((function(e){var n;console.log("friends data",e),t((n=e.data.friends,{type:I,friends:n}))}))}}var ke=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).checkIfUserIsAFriend=function(){console.log("this.props",s.props);var e=s.props,t=e.match,n=e.friends,c=t.params.userId;return-1!==n.map((function(e){return e.to_user._id})).indexOf(c)},s.handleAddFriendClick=Object(we.a)(Ne.a.mark((function e(){var t,n,c,a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.match.params.userId,n=q(t),c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())}},e.next=5,fetch(n,c);case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent).success?(s.setState({success:!0,successMessage:"Added friend successfully!"}),s.props.dispatch((i=r.data.friendship,{type:A,friend:i}))):s.setState({success:null,error:r.message});case 10:case"end":return e.stop()}var i}),e)}))),s.handleRemoveFriendClick=Object(we.a)(Ne.a.mark((function e(){var t,n,c,a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.match,n=J(t.params.userId),c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(Y())}},e.next=5,fetch(n,c);case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,console.log("await data",r),r.success?(s.setState({success:!0,successMessage:"Removed friends successfully!"}),s.props.dispatch((i=t.params.userId,{type:T,userId:i}))):s.setState({success:null,error:r.message});case 11:case"end":return e.stop()}var i}),e)}))),s.state={success:null,error:null,successMessage:null},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match;e.params.userId&&this.props.dispatch(Se(e.params.userId))}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,n=this.props.match.params;t&&n&&t.userId!==n.userId&&this.props.dispatch(Se(n.userId))}},{key:"render",value:function(){var e=this.props,t=e.match.params,n=e.profile;console.log("this.props",t);var s=n.user;if(n.inProgress)return Object(se.jsx)("h1",{children:"Loading!"});var c=this.checkIfUserIsAFriend(),a=this.state,r=a.success,i=a.error,o=a.successMessage;return Object(se.jsxs)("div",{className:"settings",children:[Object(se.jsx)("div",{className:"img-container",children:Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})}),Object(se.jsxs)("div",{className:"field",children:[Object(se.jsx)("div",{className:"field-label",children:"Name"}),Object(se.jsx)("div",{className:"field-value",children:s.name})]}),Object(se.jsxs)("div",{className:"field",children:[Object(se.jsx)("div",{className:"field-label",children:"Email"}),Object(se.jsx)("div",{className:"field-value",children:s.email})]}),Object(se.jsxs)("div",{className:"btn-grp",children:[c?Object(se.jsx)("button",{className:"button save-btn",onClick:this.handleRemoveFriendClick,children:"Remove Friend"}):Object(se.jsx)("button",{className:"button save-btn",onClick:this.handleAddFriendClick,children:"Add Friend"}),r&&Object(se.jsx)("div",{className:"alert success-dailog",children:o}),i&&Object(se.jsx)("div",{className:"alert error-dailog",children:i})]})]})}}]),n}(s.Component);var _e=Object(i.b)((function(e){return{profile:e.profile,friends:e.friends}}))(ke),Ee=function(e){return console.log("friend",e),Object(se.jsxs)("div",{className:"friends-list",children:[Object(se.jsx)("div",{className:"header",children:"Friends"}),e.friends&&0===e.friends.length&&Object(se.jsx)("div",{className:"no-friends",children:"No friends found!"}),e.friends&&e.friends.map((function(e){return Object(se.jsx)(Ie,{friend:e.to_user},e._id)}))]})};var Ie=function(e){return Object(se.jsx)("div",{children:Object(se.jsxs)(p.b,{className:"friends-item",to:"user/".concat(e.friend._id),children:[Object(se.jsx)("div",{className:"friends-img",children:Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})}),Object(se.jsx)("div",{className:"friends-name",children:e.friend.email})]})})},Ae=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleOnClick=function(){s.props.dispatch(ee(s.state.content)),s.setState({content:""}),console.log("content",s.state.content)},s.handleChange=function(e){s.setState({content:e.target.value})},s.state={content:""},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(se.jsxs)("div",{className:"create-post",children:[Object(se.jsx)("textarea",{className:"add-post",value:this.state.content,onChange:this.handleChange}),Object(se.jsx)("div",{children:Object(se.jsx)("button",{id:"add-post-btn",onClick:this.handleOnClick,children:"Add Post"})})]})}}]),n}(s.Component),Te=Object(i.b)()(Ae),Le=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleAddComment=function(e){var t=s.state.comment,n=s.props.post;"Enter"===e.key&&(s.props.dispatch(te(t,n._id)),s.setState({comment:""}))},s.handleOnCommentChange=function(e){s.setState({comment:e.target.value})},s.handlePostLike=function(){var e=s.props,t=e.post,n=e.user;s.props.dispatch(ne(t._id,"Post",n._id))},s.state={comment:""},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.user,s=this.state.comment,c=t.likes.includes(n._id);return Object(se.jsx)("div",{className:"post-wrapper",children:Object(se.jsxs)("div",{className:"post-header",children:[Object(se.jsxs)("div",{className:"post-avatar",children:[Object(se.jsx)(p.b,{to:"/user/".concat(t.user._id),children:Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})}),Object(se.jsxs)("div",{children:[Object(se.jsx)("span",{className:"post-author",children:t.user.name}),Object(se.jsxs)("span",{className:"post-time",children:[t.updatedAt.slice(11,16)," minute ago"]})]})]}),Object(se.jsx)("div",{className:"post-content",children:t.content}),Object(se.jsxs)("div",{className:"post-actions",children:[Object(se.jsxs)("button",{className:"post-like no-btn",onClick:this.handlePostLike,children:[c?Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1076/1076984.svg",alt:"like post"}):Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1077/1077035.svg",alt:"likes-icon"}),Object(se.jsx)("span",{children:t.likes.length})]}),Object(se.jsxs)("div",{className:"post-comments-icon",children:[Object(se.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1380/1380338.svg",alt:"comments-icon"}),Object(se.jsx)("span",{children:t.comments.length})]})]}),Object(se.jsx)("div",{className:"post-comment-box",children:Object(se.jsx)("input",{placeholder:"Start typing a comment",onChange:this.handleOnCommentChange,onKeyPress:this.handleAddComment,value:s})}),Object(se.jsx)("div",{className:"post-comments-list",children:t.comments.map((function(e){return Object(se.jsx)(Re,{comment:e,postId:t._id},e._id)}))})]})},t._id)}}]),n}(s.Component);var Pe=Object(i.b)((function(e){return{user:e.auth.user}}))(Le),De=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).handleCommentLike=function(){var t=e.props,n=t.comment,s=t.user;e.props.dispatch(ne(n._id,"Comment",s._id)),console.log("isCommentLiked",n.likes.length)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.user;t.likes.includes(n._id);return Object(se.jsxs)("div",{className:"post-comment-item",children:[Object(se.jsxs)("div",{className:"post-comment-header",children:[Object(se.jsx)("span",{className:"post-comment-author",children:t.user.name}),Object(se.jsxs)("span",{className:"post-comment-time",children:[t.createdAt.slice(11,16)," mins ago"]}),Object(se.jsx)("button",{style:{cursor:"pointer"},className:"post-like no-btn ",onClick:this.handleCommentLike,children:Object(se.jsxs)("span",{className:"post-comment-likes",children:[t.likes.length," likes"]})})]}),Object(se.jsx)("div",{className:"post-comment-content",children:t.content})]})}}]),n}(s.Component);var Re=Object(i.b)((function(e){return{user:e.auth.user}}))(De),Ue=n(19),Fe=n(32),Me=n(59),Be=n.n(Me),Ge=(n(103),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).setupConnections=function(){var e=s.socket,t=Object(Fe.a)(s);s.socket.on("connect",(function(){console.log("CONNECTION ESTABLISHED"),e.emit("join_room",{user_email:this.userEmail,chatroom:"codeial"}),e.on("user_joined",(function(e){console.log("NE USER JOINED",e)}))})),s.socket.on("receive_message",(function(e){var n=t.state.messages,s={};s.content=e.message,e.user_email===t.userEmail&&(s.self=!0),t.setState({messages:[].concat(Object(Ue.a)(n),[s]),typedMessage:""})}))},s.handleSubmit=function(){var e=s.state.typedMessage;e&&s.userEmail&&s.socket.emit("send_message",{message:e,user_email:s.userEmail,chatroom:"codeial"})},s.collapseChat=function(){1==s.state.collapsed?s.setState({collapsed:!1}):s.setState({collapsed:!0})},s.state={messages:[],typedMessage:"",collapsed:!1},s.socket=Be.a.connect("http://codeial.codingninjas.com:5000"),s.userEmail=e.user.email,s.userEmail&&s.setupConnections(),s}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.typedMessage,s=t.messages,c=t.collapsed;return Object(se.jsxs)("div",{className:c?"chat-container":"no-chat-box",children:[Object(se.jsxs)("div",{className:"chat-header",children:["Chat",Object(se.jsx)("button",{className:"no-btn-box",onClick:this.collapseChat,children:Object(se.jsx)("img",{src:"https://icons-for-free.com/iconfiles/png/512/minus+icon-1320185727443878037.png",alt:"close-chat",height:17})})]}),Object(se.jsx)("div",{className:c?"chat-messages":"no-chat",children:s.map((function(e){return Object(se.jsx)("div",{className:e.self?"chat-bubble self-chat":"chat-bubble other-chat",children:e.content})}))}),Object(se.jsxs)("div",{className:c?"chat-footer":"no-chat",children:[Object(se.jsx)("input",{type:"text",value:n,onChange:function(t){return e.setState({typedMessage:t.target.value})}}),Object(se.jsx)("button",{onClick:this.handleSubmit,children:"Submit"})]})]})}}]),n}(s.Component));var He=Object(i.b)((function(e){return{user:e.auth.user}}))(Ge),Ke=n(60),ze=function(e){var t=e.isLoggedin,n=e.path,s=e.component;return Object(se.jsx)(j.b,{path:n,render:function(e){return t?Object(se.jsx)(s,Object(h.a)({},e)):Object(se.jsx)(j.a,{to:{pathname:"/login",state:{from:e.location}}})}})},qe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch($());var e=Y();if(e){var t=Object(Ke.a)(e);console.log("user",t),this.props.dispatch(function(e){return{type:g,user:e}}({email:t.email,_id:t._id,name:t.name})),this.props.dispatch(ye())}}},{key:"render",value:function(){console.log("PROPS",this.props);var e=this.props,t=e.posts,n=e.auth,s=e.friends;return Object(se.jsx)(p.a,{children:Object(se.jsxs)("div",{children:[Object(se.jsx)(je,{}),Object(se.jsxs)(j.d,{children:[Object(se.jsx)(j.b,{exact:!0,path:"/",render:function(e){return Object(se.jsx)(pe,Object(h.a)(Object(h.a)({},e),{},{posts:t,friends:s,isLoggedin:n.isLoggedin}))}}),Object(se.jsx)(j.b,{path:"/login",component:fe}),Object(se.jsx)(j.b,{path:"/signup",component:ge}),Object(se.jsx)(ze,{path:"/settings",component:xe,isLoggedin:n.isLoggedin}),Object(se.jsx)(ze,{path:"/user/:userId",component:_e,isLoggedin:n.isLoggedin}),Object(se.jsx)(j.b,{component:me})]})]})})}}]),n}(c.a.Component);var Je=Object(i.b)((function(e){return{posts:e.posts,auth:e.auth,friends:e.friends}}))(qe),We=n(21),Xe=n(61);var Ve={user:{},error:null,isLoggedin:!1,inProgress:!1};var Qe={user:{},error:null,success:null,inProgress:!1};var Ze=[];var Ye={results:[]};var $e=Object(We.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.posts;case L:return[t.post].concat(Object(Ue.a)(e));case P:var n=e.map((function(e){return e._id===t.postId?Object(h.a)(Object(h.a)({},e),{},{comments:[t.comment].concat(Object(Ue.a)(e.comments))}):e}));return n;case D:var s=e.map((function(e){return e._id===t.postId?Object(h.a)(Object(h.a)({},e),{},{likes:[].concat(Object(Ue.a)(e.likes),[t.userId])}):e}));return s;case R:var c=e.map((function(e){return e._id===t.commentId?Object(h.a)(Object(h.a)({},e),{},{likes:[].concat(Object(Ue.a)(e.likes),[t.userId]),likes:Object(Ue.a)(likes)}):e}));return c;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(h.a)(Object(h.a)({},e),{},{error:null});case b:case x:return Object(h.a)(Object(h.a)({},e),{},{inProgress:!0});case f:case C:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,isLoggedin:!0,inProgress:!1,error:null});case O:case N:return Object(h.a)(Object(h.a)({},e),{},{inProgress:!1,error:t.error});case g:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,isLoggedin:!0});case v:return Object(h.a)(Object(h.a)({},e),{},{user:{},isLoggedin:!1});case S:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,error:!1});case y:return Object(h.a)(Object(h.a)({},e),{},{error:t.error});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(h.a)(Object(h.a)({},e),{},{success:!0,user:t.user,inProgress:!1});case _:return Object(h.a)(Object(h.a)({},e),{},{error:t.error,inProgress:!1});case E:return Object(h.a)(Object(h.a)({},e),{},{inProgress:!0});default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(Ue.a)(t.friends);case A:return e.concat(t.friend);case T:var n=e.filter((function(e){return e.to_user._id!==t.userId}));return n;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(h.a)(Object(h.a)({},e),{},{results:t.users});default:return e}}}),et=(n(104),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose),tt=Object(We.d)($e,et(Object(We.a)(Xe.a))),nt=document.getElementById("root");r.a.render(Object(se.jsx)(i.a,{store:tt,children:Object(se.jsx)(c.a.StrictMode,{children:Object(se.jsx)(Je,{})})}),nt)}},[[105,1,2]]]);
//# sourceMappingURL=main.62104c9e.chunk.js.map